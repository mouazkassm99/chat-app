(function(e){function t(t){for(var a,o,i=t[0],c=t[1],u=t[2],m=0,d=[];m<i.length;m++)o=i[m],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&d.push(n[o][0]),n[o]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);l&&l(t);while(d.length)d.shift()();return r.push.apply(r,u||[]),s()}function s(){for(var e,t=0;t<r.length;t++){for(var s=r[t],a=!0,i=1;i<s.length;i++){var c=s[i];0!==n[c]&&(a=!1)}a&&(r.splice(t--,1),e=o(o.s=s[0]))}return e}var a={},n={app:0},r=[];function o(t){if(a[t])return a[t].exports;var s=a[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,o),s.l=!0,s.exports}o.m=e,o.c=a,o.d=function(e,t,s){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(o.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(s,a,function(t){return e[t]}.bind(null,a));return s},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/chat-app/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var u=0;u<i.length;u++)t(i[u]);var l=c;r.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("56d7")},"034f":function(e,t,s){"use strict";s("85ec")},"11e7":function(e,t,s){"use strict";s("46ca")},"1c51":function(e,t,s){},"46ca":function(e,t,s){},"56d7":function(e,t,s){"use strict";s.r(t);s("e260"),s("e6cf"),s("cca6"),s("a79d");var a=s("2b0e"),n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"app"}},[s("div",{staticClass:"floating"},[e.user.user?s("p",{attrs:{id:"usernameBanner"}},[e._v(" You are logged in as : "),s("b",[e._v(e._s(this.user.user))])]):e._e(),e.user.user?s("button",{attrs:{id:"logoutBtn"},on:{click:e.logoutUser}},[e._v("Logout")]):e._e()]),s("router-view")],1)},r=[],o={name:"App",created:function(){},data:function(){return{text:"",messages:[]}},methods:{logoutUser:function(){localStorage.removeItem("name"),this.$store.dispatch("UPDATE_USER"),window.location.href="/"}},computed:{user:function(){return this.$store.state.user}}},i=o,c=(s("034f"),s("2877")),u=Object(c["a"])(i,n,r,!1,null,null,null),l=u.exports,m=s("123d"),d=s.n(m),p=s("e166"),f=s.n(p),g=(s("b0c0"),s("8c4f")),h=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"Login"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"}],attrs:{placeholder:"Your name ..",type:"text"},domProps:{value:e.name},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.formSubmit(t)},input:function(t){t.target.composing||(e.name=t.target.value)}}}),s("button",{on:{click:e.formSubmit}},[e._v("Start Chatting")])])},v=[],_={data:function(){return{name:""}},methods:{formSubmit:function(){localStorage.setItem("name",this.name),this.$store.commit("UPDATE_USER"),this.$router.push("/chat")}}},y=_,b=(s("8831"),Object(c["a"])(y,h,v,!1,null,"0ef79412",null)),w=b.exports,S=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"chat"}},[s("div",{staticClass:"header"}),s("div",{directives:[{name:"chat-scroll",rawName:"v-chat-scroll",value:{enabled:!0,always:!1,smooth:!0},expression:"{enabled:true, always:false, smooth: true}"}],staticClass:"wrapper",attrs:{id:"chatWrapper"},on:{"v-chat-scroll-top-reached":e.scrollShow}},e._l(e.messages,(function(e){return s("MessageWrapper",{key:e.id,attrs:{msg:e}})})),1),s("div",{staticClass:"message-form"},[s("MessageForm")],1)])},x=[],O=(s("d81d"),s("2591")),k={apiKey:"AIzaSyAHyp87RDY0AlOTXKqiLWH8t-GdCMQ6Bjo",authDomain:"chat-app-8513f.firebaseapp.com",databaseURL:"https://chat-app-8513f.firebaseio.com",projectId:"chat-app-8513f",storageBucket:"chat-app-8513f.appspot.com",messagingSenderId:"537257152234",appId:"1:537257152234:web:834279f3f091900d8c1193",measurementId:"G-GGGY9MC1FL"};O["a"].initializeApp(k);var U=O["a"],j=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"type_msg"},[s("div",{staticClass:"input_msg_write"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.msg,expression:"msg"}],staticClass:"write_msg",attrs:{type:"text",placeholder:"Type a message"},domProps:{value:e.msg},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.sendMsg(t)},input:function(t){t.target.composing||(e.msg=t.target.value)}}}),s("button",{staticClass:"msg_send_btn text-center",attrs:{type:"button"},on:{click:e.sendMsg}},[s("font-awesome-icon",{attrs:{id:"icon",icon:"paper-plane"}})],1)])])},C=[],A={data:function(){return{msg:""}},methods:{sendMsg:function(e){e.preventDefault();var t=this.msg;if(this.msg="",""!==t){var s=U.firestore();s.collection("messages").add({sender:this.$store.state.user.user,sentAt:U.firestore.FieldValue.serverTimestamp(),text:t})}}}},E=A,$=(s("11e7"),Object(c["a"])(E,j,C,!1,null,"38e5e8b0",null)),D=$.exports,M=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"container"},[s("hr"),s("div",{class:[e.isSameUser?"outgoing_msg":"incoming_msg"]},[s("div",{directives:[{name:"show",rawName:"v-show",value:!e.isSameUser,expression:"!isSameUser"}],class:[e.isSameUser?"":"incoming_msg_img","text-center"]},[s("img",{attrs:{src:"https://ptetutorials.com/images/user-profile.png",alt:"sunil"}}),s("p",{staticClass:"image-name"},[e._v(" "+e._s(e.msg.sender)+" ")])]),s("div",{class:[e.isSameUser?"sent_msg":"received_msg"]},[s("div",{class:[e.isSameUser?"":"received_withd_msg"]},[s("p",[e._v(" "+e._s(e.msg.text)+" ")]),s("span",{staticClass:"time_date"},[e._v(e._s(e.msgDate))])])])])])},P=[],L={props:["msg"],data:function(){return{isSameUser:!1}},methods:{},created:function(){this.$store.state.user||this.$router.push("/"),this.$store.state.user.user===this.msg.sender&&(this.isSameUser=!0)},computed:{msgDate:function(){var e=this.msg.sentAt.toDate(),t=window.navigator.userLanguage||window.navigator.language;return e.toLocaleDateString(t,{hour:"2-digit",minute:"2-digit"})}}},I=L,T=(s("d35e"),Object(c["a"])(I,M,P,!1,null,"d62d0698",null)),B=T.exports,G={created:function(){var e=this,t=U.firestore();t.collection("messages").orderBy("sentAt","desc").limit(this.messagesLoaded).get().then((function(t){e.messages=t.docs.map((function(e){return e.data()})),e.messages=e.messages.reverse()})),t.collection("messages").orderBy("sentAt","desc").onSnapshot((function(){e.loadData()}))},data:function(){return{text:"",messages:[],username:"tester",messagesLoaded:20,stopScroll:!1,publicPath:"/chat-app/"}},components:{MessageForm:D,MessageWrapper:B},methods:{loadData:function(){var e=this,t=U.firestore();t.collection("messages").orderBy("sentAt","desc").limit(this.messagesLoaded).get().then((function(t){e.messages=t.docs.map((function(e){return e.data()})),e.messages=e.messages.reverse()})),t.collection("messages").get().then((function(t){t.docs.length===e.messages.length&&(e.stopScroll=!0)}))},scrollShow:function(){if(this.messagesLoaded+=10,!this.stopScroll){this.loadData();var e=document.getElementById("chatWrapper");e.scrollTop=e.scrollHeight/5}}}},R=G,W=(s("791f"),Object(c["a"])(R,S,x,!1,null,"0591d532",null)),F=W.exports,N=s("2f62"),Y={state:{user:localStorage.getItem("name")},getters:{user:function(e){return e.user}},mutations:{UPDATE_USER:function(e){e.user=localStorage.getItem("name")}},actions:{}};a["a"].use(N["a"]);var q=new N["a"].Store({modules:{user:Y}}),H=q;a["a"].use(g["a"]);var z=new g["a"]({mode:"history",routes:[{path:"/chat",name:"chat",component:F,meta:{requiresAuth:!0}},{path:"/",name:"home",component:w}]});z.beforeEach((function(e,t,s){e.meta.requiresAuth?(H.state.user?s():s({name:"home"}),s()):"home"===e.name&&H.state.user.user?(alert("you are logged in"),s({name:"chat"})):s()}));var J=z,K=s("ecee"),Q=s("c074"),V=s("ad3d");K["c"].add(Q["a"]),a["a"].component("font-awesome-icon",V["a"]),a["a"].config.productionTip=!1,a["a"].use(d.a),a["a"].use(f.a),new a["a"]({router:J,store:H,render:function(e){return e(l)}}).$mount("#app")},"791f":function(e,t,s){"use strict";s("1c51")},"7c3a":function(e,t,s){},"85ec":function(e,t,s){},8831:function(e,t,s){"use strict";s("a689")},a689:function(e,t,s){},d35e:function(e,t,s){"use strict";s("7c3a")}});
//# sourceMappingURL=app.2b3ff012.js.map